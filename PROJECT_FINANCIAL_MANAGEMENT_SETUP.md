# ุฏููู ุฅุนุฏุงุฏ ูุธุงู ุงูุฅุฏุงุฑุฉ ุงููุงููุฉ ุงููุจูู ุนูู ุงููุดุงุฑูุน

## ุงููุดููุฉ
ูุงูุช ุงูุจูุงูุงุช ุงููุงููุฉ (ุงูุฅูุฑุงุฏุงุช ูุงูุชูุงููู) ุบูุฑ ูุฑุชุจุทุฉ ุจุงููุดุงุฑูุนุ ููุง ูุฌุนู ูู ุงูุตุนุจ ุชุชุจุน ุงูุฃุฏุงุก ุงููุงูู ููู ูุดุฑูุน ุนูู ุญุฏุฉ.

## ุงูุญู
ุชู ุชุทููุฑ ูุธุงู ุฅุฏุงุฑุฉ ูุงููุฉ ูุจูู ุนูู ุงููุดุงุฑูุน ูุน ูุงุฆูุฉ ููุณุฏูุฉ ูู ุงูููุฏุฑ ูุงุฎุชูุงุฑ ุงููุดุฑูุน ุงููุทููุจ.

---

## ๐ ุงูุฎุทูุงุช ุงููุทููุจุฉ ููุชุทุจูู:

### **ุงูุฎุทูุฉ 1: ุชุญุฏูุซ ูุงุนุฏุฉ ุงูุจูุงูุงุช**

#### **ุฃ. ุชุดุบูู Migration ุฅุถุงูุฉ project_id**
```sql
-- ุชุดุบูู ูุฐุง ุงูููู ูู Supabase SQL Editor:
-- supabase/migrations/20250909121400_add_project_id_to_financial_tables.sql

-- ูุฐุง ุงูููู ูุถูู:
-- 1. ุนููุฏ project_id ูุฌุฏูู revenues
-- 2. ุนููุฏ project_id ูุฌุฏูู costs
-- 3. ููุงุฑุณ ููุฃุฏุงุก ุงูุฃูุถู
-- 4. ุนุฑุถ project_financial_summary ููุฅุญุตุงุฆูุงุช
```

#### **ุจ. ุงูุชุญูู ูู ุชุทุจูู ุงูุชุนุฏููุงุช**
```sql
-- ุชุญูู ูู ุฅุถุงูุฉ ุงูุฃุนูุฏุฉ
SELECT column_name FROM information_schema.columns
WHERE table_name = 'revenues' AND column_name = 'project_id';

SELECT column_name FROM information_schema.columns
WHERE table_name = 'costs' AND column_name = 'project_id';
```

### **ุงูุฎุทูุฉ 2: ุฅุนุงุฏุฉ ุชุดุบูู ุงูุชุทุจูู**

1. **ุฃุนุฏ ุชุดุบูู ุงูุฎุงุฏู:**
   ```bash
   npm run dev
   ```

2. **ุงุฐูุจ ุฅูู ุตูุญุฉ "ุงูุชุฎุทูุท ูุงูุฅุฏุงุฑุฉ ุงููุงููุฉ"**

3. **ุณุชุฌุฏ ูุงุฆูุฉ ููุณุฏูุฉ ุฌุฏูุฏุฉ ูู ุงูููุฏุฑ:**
   ```
   ุงูุชุฎุทูุท ูุงูุฅุฏุงุฑุฉ ุงููุงููุฉ    โผ [ุฌููุน ุงููุดุงุฑูุน]
   ```

---

## ๐ฏ ุงููููุฒุงุช ุงูุฌุฏูุฏุฉ:

### **1. ูุงุฆูุฉ ููุณุฏูุฉ ูุงุฎุชูุงุฑ ุงููุดุฑูุน**
- **"ุฌููุน ุงููุดุงุฑูุน"**: ุนุฑุถ ุฌููุน ุงูุจูุงูุงุช ุงููุงููุฉ
- **ุงุณู ุงููุดุฑูุน**: ุนุฑุถ ุงูุจูุงูุงุช ุงููุงููุฉ ูููุดุฑูุน ุงููุญุฏุฏ ููุท
- **ุชุญุฏูุซ ุชููุงุฆู**: ุงูุจูุงูุงุช ุชุชุบูุฑ ููุฑ ุงุฎุชูุงุฑ ุงููุดุฑูุน

### **2. ุฑุจุท ุงูุจูุงูุงุช ุจุงููุดุงุฑูุน**
- **ุงูุฅูุฑุงุฏุงุช**: ูููู ุฑุจุท ูู ุฅูุฑุงุฏ ุจูุดุฑูุน ูุญุฏุฏ
- **ุงูุชูุงููู**: ูููู ุฑุจุท ูู ุชูููุฉ ุจูุดุฑูุน ูุญุฏุฏ
- **ุงูุจูุงูุงุช ุงูุนุงูุฉ**: ูููู ุชุฑู ุญูู ุงููุดุฑูุน ูุงุฑุบุงู ููุจูุงูุงุช ุงูุนุงูุฉ

### **3. ุชุญุณููุงุช ูู ุงูููุงุฐุฌ**
- **RevenueModal**: ุฅุถุงูุฉ ูุงุฆูุฉ ููุณุฏูุฉ ูุงุฎุชูุงุฑ ุงููุดุฑูุน
- **CostModal**: ุฅุถุงูุฉ ูุงุฆูุฉ ููุณุฏูุฉ ูุงุฎุชูุงุฑ ุงููุดุฑูุน
- **ุญูุธ ุชููุงุฆู**: ุงูุจูุงูุงุช ุชูุญูุธ ูุน project_id

### **4. ุนุฑุถ ุงูุจูุงูุงุช ุญุณุจ ุงููุดุฑูุน**
- **ุงูุฑุณูู ุงูุจูุงููุฉ**: ุชุนุฑุถ ุจูุงูุงุช ุงููุดุฑูุน ุงููุญุฏุฏ
- **ุงูุฌุฏุงูู**: ุชูุตูู ุญุณุจ ุงููุดุฑูุน ุงููุฎุชุงุฑ
- **ุงูุฅุญุตุงุฆูุงุช**: ุชูุญุณุจ ูููุดุฑูุน ุงููุญุฏุฏ

---

## ๐ง ููููุฉ ุงูุงุณุชุฎุฏุงู:

### **ุฅุถุงูุฉ ุจูุงูุงุช ูุงููุฉ ุฌุฏูุฏุฉ:**

1. **ุงุฐูุจ ุฅูู ุตูุญุฉ "ุงูุชุฎุทูุท ูุงูุฅุฏุงุฑุฉ ุงููุงููุฉ"**
2. **ุงุฎุชุฑ ุงููุดุฑูุน ูู ุงููุงุฆูุฉ ุงูููุณุฏูุฉ ูู ุงูููุฏุฑ**
3. **ุงุถุบุท "ุฅุถุงูุฉ ุฅูุฑุงุฏ" ุฃู "ุฅุถุงูุฉ ูุตุฑูู"**
4. **ุงููุฃ ุงูุจูุงูุงุช ุงููุทููุจุฉ**
5. **ุงุฎุชุฑ ุงููุดุฑูุน ูู ูุงุฆูุฉ "ุงููุดุฑูุน" (ุงุฎุชูุงุฑู)**
6. **ุงุถุบุท "ุฅุถุงูุฉ"**

### **ุนุฑุถ ุงูุจูุงูุงุช ุญุณุจ ุงููุดุฑูุน:**

1. **ุงุฎุชุฑ ุงููุดุฑูุน ูู ุงููุงุฆูุฉ ุงูููุณุฏูุฉ ูู ุงูููุฏุฑ**
2. **ุณุชูุญุฏุซ ุฌููุน ุงูุจูุงูุงุช ุชููุงุฆูุงู:**
   - ุงูุฑุณูู ุงูุจูุงููุฉ
   - ุฌุฏุงูู ุงูุจูุงูุงุช
   - ุงูุฅุญุตุงุฆูุงุช
   - ููุฎุต ุงูุงูุญุฑุงูุงุช

### **ุงูุจูุงูุงุช ุงูุนุงูุฉ:**

- **ุงุชุฑู ุญูู "ุงููุดุฑูุน" ูุงุฑุบุงู** ุนูุฏ ุฅุถุงูุฉ ุงูุจูุงูุงุช ุงูุนุงูุฉ
- **ุณุชุธูุฑ ูุฐู ุงูุจูุงูุงุช** ุนูุฏ ุงุฎุชูุงุฑ "ุฌููุน ุงููุดุงุฑูุน"
- **ูู ุชุธูุฑ** ุนูุฏ ุงุฎุชูุงุฑ ูุดุฑูุน ูุญุฏุฏ

---

## ๐ ุงูุงุณุชุนูุงูุงุช ุงูุฌุฏูุฏุฉ:

### **ุนุฑุถ ุงูุจูุงูุงุช ุญุณุจ ุงููุดุฑูุน:**
```sql
-- ุงูุฅูุฑุงุฏุงุช ููุดุฑูุน ูุญุฏุฏ
SELECT * FROM revenues
WHERE company_id = 'user-company-id'
AND (project_id = 'selected-project-id' OR project_id IS NULL);

-- ุงูุชูุงููู ููุดุฑูุน ูุญุฏุฏ
SELECT * FROM costs
WHERE company_id = 'user-company-id'
AND (project_id = 'selected-project-id' OR project_id IS NULL);
```

### **ููุฎุต ูุงูู ูููุดุฑูุน:**
```sql
-- ุนุฑุถ project_financial_summary
SELECT * FROM project_financial_summary
WHERE project_id = 'selected-project-id';
```

---

## ๐ ุงูุชุญุฏูุซุงุช ุงููุทููุจุฉ:

### **ูู DataContext.tsx:**
```typescript
// ุชู ุชุญุฏูุซ ุงุณุชุนูุงู ุชุญููู ุงูุจูุงูุงุช ููุดูู project_id
const { data: revenue, error: revenueError } = await supabase
  .from('revenues')
  .select('*')
  .eq('company_id', companyId)
  .eq('project_id', selectedProjectId) // ุฅุฐุง ูุงู ูุญุฏุฏ
  .order('created_at', { ascending: false });
```

### **ูู Page2.tsx:**
```typescript
// ุฅุถุงูุฉ state ูููุดุฑูุน ุงููุญุฏุฏ
const [selectedProjectId, setSelectedProjectId] = useState<string>('');

// ูุงุฆูุฉ ููุณุฏูุฉ ูู ุงูููุฏุฑ
<select
  value={selectedProjectId}
  onChange={(e) => {
    setSelectedProjectId(e.target.value);
    loadData(); // ุฅุนุงุฏุฉ ุชุญููู ุงูุจูุงูุงุช
  }}
>
  <option value="">ุฌููุน ุงููุดุงุฑูุน</option>
  {projects.map(project => (
    <option key={project.id} value={project.id}>
      {project.name}
    </option>
  ))}
</select>
```

---

## ๐ฏ ุงูููุงุฆุฏ:

### **ูููุณุชุฎุฏููู:**
- โ **ูุงุฌูุฉ ุจุณูุทุฉ ููุงุถุญุฉ**
- โ **ุชุบููุฑ ุณุฑูุน ุจูู ุงููุดุงุฑูุน**
- โ **ุชุฑููุฒ ุนูู ูุดุฑูุน ูุงุญุฏ**
- โ **ุณูููุฉ ูู ุงูููุงุฑูุฉ**

### **ููุฅุฏุงุฑุฉ:**
- โ **ุชุชุจุน ุฏููู ููุฃุฏุงุก ุงููุงูู**
- โ **ุชูุงุฑูุฑ ูุดุฑูุนูุฉ ููุตูุฉ**
- โ **ุงุชุฎุงุฐ ูุฑุงุฑุงุช ูุฏุฑูุณุฉ**
- โ **ุชุญููู ูุนุงู ููุชูุงููู**

### **ูููุทูุฑูู:**
- โ **ููุฏ ููุธู ููุงุจู ููุตูุงูุฉ**
- โ **ุณูููุฉ ุฅุถุงูุฉ ูููุฒุงุช ุฌุฏูุฏุฉ**
- โ **ุฃุฏุงุก ูุญุณู ูุน ุงูููุงุฑุณ**
- โ **ุฃูุงู ูุญูู ูุน RLS**

---

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ:

### **ูุฑูุจุงู:**
- [ ] **ุชูุงุฑูุฑ ูุงููุฉ ุชูุตูููุฉ ููู ูุดุฑูุน**
- [ ] **ููุงุฑูุฉ ุจูู ุงููุดุงุฑูุน**
- [ ] **ุชูุจููุงุช ูุงููุฉ**
- [ ] **ููุฒุงููุงุช ูุดุฑูุนูุฉ**
- [ ] **ุชุญููู ุงูุฑุจุญูุฉ**

### **ุชุญุณููุงุช ููุชุฑุญุฉ:**
- [ ] **ููุชุฑุฉ ุฒูููุฉ ูุชูุฏูุฉ**
- [ ] **ุชุตุฏูุฑ ุงูุชูุงุฑูุฑ**
- [ ] **ุฑุณูู ุจูุงููุฉ ุชูุงุนููุฉ**
- [ ] **ุชูุจููุงุช ุชููุงุฆูุฉ**

---

## ๐ ุงูุฏุนู ุงูููู:

ุฅุฐุง ูุงุฌูุช ุฃู ูุดุงูู:

1. **ุชุญูู ูู ุชุดุบูู Migration:**
   ```sql
   SELECT * FROM information_schema.columns
   WHERE table_name IN ('revenues', 'costs')
   AND column_name = 'project_id';
   ```

2. **ุชุญูู ูู ุงูุจูุงูุงุช:**
   ```sql
   SELECT COUNT(*) FROM revenues WHERE project_id IS NOT NULL;
   SELECT COUNT(*) FROM costs WHERE project_id IS NOT NULL;
   ```

3. **ุชุญูู ูู ุงูุฃุฐููุงุช:**
   - ุชุฃูุฏ ูู ูุฌูุฏ ุฃุฐููุงุช RLS
   - ุชุญูู ูู ุตุญุฉ company_id

---

**๐ ุชู ุชุทุจูู ูุธุงู ุงูุฅุฏุงุฑุฉ ุงููุงููุฉ ุงููุจูู ุนูู ุงููุดุงุฑูุน ุจูุฌุงุญ!**

ุงูุขู ููููู:
- ุฅุฏุงุฑุฉ ุงูุจูุงูุงุช ุงููุงููุฉ ููู ูุดุฑูุน ุนูู ุญุฏุฉ
- ุนุฑุถ ุงูุชูุงุฑูุฑ ุงููุงููุฉ ุญุณุจ ุงููุดุฑูุน
- ุชุชุจุน ุงูุฃุฏุงุก ุงููุงูู ุจุฏูุฉ
- ุงุชุฎุงุฐ ูุฑุงุฑุงุช ูุฏุฑูุณุฉ ุจูุงุกู ุนูู ุจูุงูุงุช ุฏูููุฉ

**ุงุณุชูุชุน ุจุงููุธุงู ุงูุฌุฏูุฏ! ๐**